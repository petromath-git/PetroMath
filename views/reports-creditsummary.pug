extends layout

block content
    
    form(method='POST' action='/reports-creditsummary')      
        table.center
            tr              
                td Date:
                td
                    input#toclosingDate.form-control(type='date', name='toClosingDate', value=toClosingDate max=currentDate format="dd/mm/yyyy" required)
                td &nbsp; 
                td 
                    input(type="hidden" name="caller" value="notpdf")             
                td
                    button.btn.btn-primary(type='submit') Go
                td &nbsp;   
                td                    
                    button.btn.btn-primary(
                        type='button', 
                        onClick='generatePDF(window.location.href)', 
                        id='enable-user', 
                        title='Report - DSR'                        
                    ) Print as PDF    
    div &nbsp;
    div
        if creditsummary && creditsummary.length > 0
            table(class="table")
                thead(class="thead-light")
                    tr
                        th.text-right S.No
                        th &nbsp;
                        th.text-left Credit Party
                        th &nbsp;
                        th.text-right Outstanding                                               
                tbody                  
                    - var totaloutstanding = 0
                    - let serialNumber = 0; // Initialize serial number tracker    
                    each val in creditsummary
                            tr
                                if(val.Outstanding!=0)
                                    - serialNumber++; // Increment serial number only for valid rows
                                    td.text-right #{serialNumber}
                                    td &nbsp;
                                    td.text-left= val.CreditParty
                                    td &nbsp;
                                    td.text-right= val.Outstanding
                                    - totaloutstanding += Number(val.Outstanding)
                    tr
                        td &nbsp;
                        td &nbsp;
                        th.text-right Total Outstanding
                        td &nbsp;
                        th.text-right.text-danger #{totaloutstanding.toFixed(2)}          

        else
            div.row &nbsp;
            div.row.bg-light No records to display.                   
                            

    
