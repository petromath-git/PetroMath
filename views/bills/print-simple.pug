doctype html
html(lang='en')
    head
        meta(charset='UTF-8')
        meta(name='viewport', content='width=device-width, initial-scale=1.0')
        title Bill #{bill.bill_no} - Print
        style.
            /* Simplified CSS for PDF generation */
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }
            
            body {
                font-family: Arial, sans-serif;
                font-size: 10px;
                line-height: 1.3;
                width: 100%;
                margin: 0;
                padding: 10px;
                background: white;
                color: black;
            }
            
            .bill-container {
                width: 100%;
                max-width: 95mm;
            }
            
            .header {
                text-align: center;
                border-bottom: 1px solid #000;
                padding-bottom: 5px;
                margin-bottom: 8px;
            }
            
            .company-name {
                font-size: 16px;
                font-weight: bold;
                margin-bottom: 3px;
            }
            
            .company-address {
                font-size: 9px;
                margin-bottom: 2px;
            }
            
            .bill-info {
                margin-bottom: 8px;
                font-size: 9px;
            }
            
            .bill-row {
                margin-bottom: 2px;
            }
            
            .customer-section {
                margin-bottom: 8px;
                font-size: 9px;
            }
            
            .items-table {
                width: 100%;
                border-collapse: collapse;
                margin-bottom: 8px;
                font-size: 8px;
            }
            
            .items-table th,
            .items-table td {
                border: 1px solid #000;
                padding: 2px;
                text-align: left;
            }
            
            .items-table th {
                background-color: #f0f0f0;
                font-weight: bold;
                text-align: center;
            }
            
            .text-right {
                text-align: right;
            }
            
            .text-center {
                text-align: center;
            }
            
            .totals-section {
                border-top: 1px solid #000;
                padding-top: 5px;
                margin-bottom: 8px;
            }
            
            .total-row {
                margin-bottom: 2px;
                font-size: 9px;
            }
            
            .grand-total {
                font-weight: bold;
                font-size: 11px;
                border-top: 1px solid #000;
                padding-top: 3px;
                margin-top: 3px;
            }
            
            .footer {
                border-top: 1px solid #000;
                padding-top: 5px;
                text-align: center;
                font-size: 8px;
            }
            
            .bold {
                font-weight: bold;
            }
    
    body
        .bill-container
            //- Header Section
            .header
                .company-name #{bill.location_name || 'Petrol Pump'}
                .company-address #{bill.location_address || 'Address not available'}
            
            //- Bill Information
            .bill-info
                .bill-row
                    strong Bill: #{bill.bill_no} | Type: #{bill.bill_type} | Status: #{bill.bill_status}
                .bill-row
                    | Date: #{new Date(bill.creation_date).toLocaleDateString('en-IN')} | Time: #{new Date(bill.creation_date).toLocaleTimeString('en-IN')}
                .bill-row
                    | Print ##{bill.print_count + 1}
            
            //- Customer Information
            .customer-section
                .bill-row
                    strong Customer: #{bill.customer_name || 'Cash Customer'}
                if bill.cashier_name
                    .bill-row
                        strong Cashier: #{bill.cashier_name}
            
            //- Items Table
            table.items-table
                thead
                    tr
                        th Product
                        th Qty
                        th Rate
                        th Amount
                
                tbody
                    each item in items
                        tr
                            td 
                                strong #{item.product_name}
                                if item.notes
                                    br
                                    small #{item.notes}
                            td.text-center #{parseFloat(item.qty).toFixed(2)} #{item.unit}
                            td.text-right ₹#{parseFloat(item.price).toFixed(2)}
                            td.text-right ₹#{parseFloat(item.amount).toFixed(2)}
            
            //- Totals Section
            .totals-section
                .total-row
                    | Subtotal: ₹#{totals.subtotal.toFixed(2)}
                
                if totals.cgst > 0
                    .total-row
                        | CGST: ₹#{totals.cgst.toFixed(2)}
                
                if totals.sgst > 0
                    .total-row
                        | SGST: ₹#{totals.sgst.toFixed(2)}
                
                .total-row.grand-total
                    | GRAND TOTAL: ₹#{totals.grandTotal.toFixed(2)}
            
            //- Footer
            .footer
                div Thank you for your business!
                div This is a computer-generated bill
                div Printed: #{printDate.toLocaleDateString('en-IN')} #{printDate.toLocaleTimeString('en-IN')}